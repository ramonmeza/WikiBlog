@model WikiBlog.Models.Post

<!-- Modal -->
<div class="modal fade" id="postModal" tabindex="-1" role="dialog" aria-labelledby="postModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="postModalLabel">@Html.DisplayFor(model => model.Title)</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                @Html.DisplayFor(model => model.Content)
            </div>
            <div class="modal-footer">
                <button id="editModal" type="button" class="btn btn-primary">Edit Post</button>
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
        </div>
        <div class="modal-content d-none">
            <div class="modal-header">
                <h5 class="modal-title" id="postModalLabel">Edit Post</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form asp-action="Put" id="HiddenEditPostForm" style="display: none;"></form>
                <div id="EditPostForm">
                    <div class="form-group">
                        <input asp-for="Title" id="EditPostTitle" class="form-control" type="text" placeholder="Title" required />
                    </div>
                    <div class="form-group">
                        <input asp-for="Author" id="EditPostAuthor" class="form-control" type="text" placeholder="Author" required />
                    </div>
                    <div class="form-group">
                        <textarea asp-for="Content" id="EditPostContent" class="form-control" placeholder="Content" required></textarea>
                    </div>
                    <div class="form-group">
                        <button id="EditPostButton" class="btn btn-primary btn-block" type="submit" data-postid="@Html.DisplayFor(model => model.ID)">Save Changes</button>
                    </div>
                </div>               
            </div>
            <div class="modal-footer">
                <form asp-action="Delete">
                    <button data-postid="@Html.DisplayFor(model => model.ID)" id="DeletePostButton" class="btn btn-danger btn-block">Delete</button>
                </form>
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

@if (ViewData["post_id"] != null)
{
    @:<script>$("#postModal").modal("show");</script>
}